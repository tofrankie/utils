# JavaScript Utils 项目任务拆解

## 文件命名规范
- **所有文件使用 kebab-case 命名**：`my-function.ts`、`user-utils.js`
- **特殊函数名保持原意**：`convert2pinyin`（而非 `convert-to-pinyin`）
- **配置文件使用 kebab-case**：`eslint.config.js`、`vitest.config.ts`
- **测试文件后缀**：`*.test.ts`、`*.spec.ts`、`*.bench.ts`
- **示例文件后缀**：`*-demo.html`、`*-demo.cjs`、`*-demo.mjs`

## 重要开发规则
- **GitHub Actions 同步更新**：当修改 `package.json` 中的脚本命令时，必须同步检查并更新 `.github/workflows/` 中的相关配置，确保 CI/CD 流程与项目配置保持一致

## 总体时间规划
- **第1-3周**: 基础架构搭建
- **第4-7周**: 功能增强开发
- **第8-10周**: 部署和优化
- **第11周**: 测试和发布

## 阶段一：基础架构搭建 (2-3周)

### 1.1 项目结构重构
- [x] **1.1.1** 清空原有项目内容（保留 .git、plan.md、task.md、README.md）
- [x] **1.1.2** 创建单包目录结构 (src/, dist/, test/, docs/, examples/, scripts/)
- [x] **1.1.3** 设置根 package.json 和脚本
- [x] **1.1.4** 配置 pnpm 包管理

### 1.2 TypeScript 配置
- [x] **1.2.1** 配置 TypeScript 编译选项
- [x] **1.2.2** 配置 tsconfig.build.json 构建配置
- [x] **1.2.3** 添加基础类型定义
- [x] **1.2.4** 配置类型检查脚本 (tsc --noEmit + tsc --project tsconfig.build.json)

### 1.3 构建系统配置
- [x] **1.3.1** 安装和配置 tsdown
- [x] **1.3.2** 创建构建配置文件 (tsdown.config.js)
- [x] **1.3.3** 设置多格式输出 (CJS + ESM + DTS)
- [x] **1.3.4** 配置 Tree Shaking
- [x] **1.3.5** 配置包导出策略 (exports 字段精确控制)
- [x] **1.3.6** 配置别名管理 (tsconfig paths + tsdown)
- [x] **1.3.7** 集成 publint 验证包发布配置
- [x] **1.3.8** 测试构建流程和输出

### 1.4 代码规范配置
- [x] **1.4.1** 配置 ESLint (使用 eslint.config.js 新格式)
- [x] **1.4.2** 配置 Prettier (使用 prettier.config.js)
- [x] **1.4.3** 配置 Stylelint (使用 stylelint.config.js)
- [x] **1.4.4** 配置 @commitlint/cli
- [x] **1.4.5** 配置 Husky 和 lint-staged

## 阶段二：功能增强 (3-4周)

### 2.1 测试系统完善
- [x] **2.1.1** 配置 Vitest 测试环境
- [x] **2.1.2** 配置跨环境测试 (Node.js + jsdom)
- [x] **2.1.3** 编写新的测试用例
- [x] **2.1.4** 配置测试覆盖率
- [x] **2.1.5** 集成性能基准测试 (tinybench)
- [x] **2.1.6** 设置测试自动化

### 2.2 文档系统搭建
- [x] **2.2.1** 配置 VitePress
- [x] **2.2.2** 创建文档结构
- [x] **2.2.3** 设计主题和布局
- [x] **2.2.4** 配置自动文档生成
- [x] **2.2.5** 集成 TypeDoc (自动化 API 文档)
- [ ] **2.2.6** 配置国际化支持
- [x] **2.2.7** 配置本地搜索功能
- [x] **2.2.8** 配置 TypeDoc 自动生成

### 2.3 Playground 集成
- [x] **2.3.1** 在 docs 中创建 playground/ 页面
- [x] **2.3.2** 安装和配置 @stackblitz/sdk
- [x] **2.3.3** 创建 WebContainer 嵌入组件
- [x] **2.3.4** 创建函数示例模板
- [ ] **2.3.5** 实现版本切换功能
- [x] **2.3.6** 添加源码和测试链接
- [x] **2.3.7** 限制 Playground 范围（纯前端工具函数）
- [x] **2.3.8** 集成 stackblitz sdk 内嵌

### 2.4 版本管理
- [x] **2.4.1** 配置 Changesets (管理版本和 changelog)
- [x] **2.4.2** 设置版本发布流程
- [x] **2.4.3** 配置自动 changelog 生成
- [x] **2.4.4** 设置语义化版本控制

### 2.5 文档国际化
- [ ] **2.5.1** 配置 VitePress 国际化功能
- [ ] **2.5.2** 创建中英文文档结构
- [ ] **2.5.3** 翻译核心文档内容（指南、Playground 等）
- [ ] **2.5.4** 添加语言切换组件
- [ ] **2.5.5** 配置多语言路由
- [ ] **2.5.6** 设置默认语言和回退机制
- [ ] **2.5.7** API 文档保持英文（从 TSDoc 自动生成）

## 阶段三：部署和优化 (2-3周)

### 3.0 DX 优化
- [x] **3.0.1** 创建 examples/ 目录（独立于 docs/playground）
- [x] **3.0.2** 配置 vitest --watch + esno 快速验证
- [x] **3.0.3** 添加本地调试和示例运行环境
- [x] **3.0.4** 配置包导出策略优化

### 3.1 CI/CD 流程优化
- [x] **3.1.1** 配置 GitHub Actions
- [x] **3.1.2** 分步骤运行：lint、test、build、docs-build、publint
- [x] **3.1.3** PR 必须过 lint + test + publint 才能合并
- [x] **3.1.4** 区分 check（lint、test、build、publint）和 release（changesets publish）
- [x] **3.1.5** 设置自动部署流程
- [x] **3.1.6** 配置 PR 自动部署 VitePress 文档预览
- [ ] **3.1.7** 配置自定义域名（可选）
- [x] **3.1.8** 测试部署流程

### 3.2 性能优化
- [x] **3.2.1** 优化构建配置
- [x] **3.2.2** 
- [x] **3.2.3** 优化加载性能
- [x] **3.2.4** 配置缓存策略

### 3.3 用户体验优化
- [ ] **3.3.1** 完善文档导航
- [ ] **3.3.2** 优化 Playground 体验
- [ ] **3.3.3** 添加搜索功能
- [ ] **3.3.4** 配置 PWA（可选）

### 3.4 发布准备
- [ ] **3.4.1** 完善 README
- [ ] **3.4.2** 编写迁移指南
- [ ] **3.4.3** 准备发布说明
- [ ] **3.4.4** 测试完整流程

## 任务优先级

### 高优先级（必须完成）
- 阶段一：基础架构搭建
- 阶段二：测试系统完善
- 阶段二：文档系统搭建
- 阶段三：CI/CD 流程优化

### 中优先级（重要功能）
- 阶段二：Playground 集成
- 阶段二：版本管理
- 阶段三：性能优化

### 低优先级（可选功能）
- 阶段二：文档国际化
- 阶段三：用户体验优化
- 阶段三：PWA 配置

## 里程碑检查点

### 里程碑 1：基础架构完成（第3周末）
- [ ] 项目结构重构完成
- [ ] TypeScript 迁移完成
- [ ] 构建系统配置完成
- [ ] 代码规范配置完成

### 里程碑 2：核心功能完成（第7周末）
- [ ] 测试系统完善
- [ ] 文档系统搭建
- [ ] Playground 集成
- [ ] 版本管理配置

### 里程碑 3：发布就绪（第10周末）
- [ ] CI/CD 流程优化
- [ ] 性能优化
- [ ] 用户体验优化
- [ ] 发布准备完成

## 风险控制

### 技术风险
- **tsdown 稳定性**: 准备 Rollup 作为备选方案
- **StackBlitz 集成**: 限制 Playground 范围，避免复杂 Node.js API

### 时间风险
- **文档国际化**: 可延后到发布后
- **PWA 配置**: 可选功能，可延后

### 质量风险
- **测试覆盖率**: 确保核心功能测试完整
- **文档质量**: 优先保证英文文档质量
